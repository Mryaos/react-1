var Router=ReactRouter.Router,Route=ReactRouter.Route,hashHistory=ReactRouter.hashHistory,Link=ReactRouter.Link,List=React.createClass({displayName:"List",del:function(a){confirm("确定删除?")&&(a.preventDefault(),ajax({url:"https://leancloud.cn:443/1.1/classes/TestObject/"+this.props.data.objectId,method:"delete",headers:{"X-LC-Id":"GhjaurLvo8yP5FS5gDJsLHi1-gzGzoHsz","X-LC-Key":"LnP8wradUhj7Q53r8fabnKoS","Content-Type":"application/json"},success:function(a){alert("删除成功")}}))},render:function(){return React.createElement("li",null,React.createElement("h2",{className:"user"},this.props.data.name),React.createElement("p",{className:"comment"},this.props.data.words),React.createElement("a",{href:"javascript:;",onClick:this.del,className:"del"},"删除"))}}),CommentList=React.createClass({displayName:"CommentList",getInitialState:function(){return{data:[]}},componentDidMount:function(){function a(){ajax({url:"https://api.leancloud.cn/1.1/classes/TestObject",method:"get",headers:{"X-LC-Id":"GhjaurLvo8yP5FS5gDJsLHi1-gzGzoHsz","X-LC-Key":"LnP8wradUhj7Q53r8fabnKoS","Content-Type":"application/json"},success:function(a){var a=JSON.parse(unescape(a.replace(/\\u/g,"%u")));_this.setState({data:a.results})}})}_this=this,a()},render:function(){return React.createElement("ul",null,this.state.data.map(function(a){return React.createElement(List,{data:a})}))}}),CommentUpload=React.createClass({displayName:"CommentUpload",handleSubmit:function(a){a.preventDefault();this.refs.username.getDOMNode().value,this.refs.content.getDOMNode().value;ajax({url:"https://leancloud.cn:443/1.1/classes/TestObject",method:"post",headers:{"X-LC-Id":"GhjaurLvo8yP5FS5gDJsLHi1-gzGzoHsz","X-LC-Key":"LnP8wradUhj7Q53r8fabnKoS","Content-Type":"application/json"},data:{name:"username",words:"content"},success:function(a){console.log(a.objectId)}})},render:function(){return React.createElement("form",{action:"/",enctype:"application/json",method:"post",onSubmit:this.handleSubmit},React.createElement("label",{htmlFor:"username"},"name: ",React.createElement("input",{type:"text",name:"username",ref:"username"})),React.createElement("label",{htmlFor:"content"},"words: ",React.createElement("input",{type:"text",name:"content",ref:"content"})),React.createElement("input",{type:"submit",value:"提交评论","class":"submit"}))}}),App=React.createClass({displayName:"App",render:function(){return React.createElement("div",{className:"comment-container"},React.createElement("h2",null,"Welcome to my blog."),React.createElement("ul",null,React.createElement("li",null,React.createElement(Link,{to:"/commentupload"},"添加评论")),React.createElement("li",null,React.createElement(Link,{to:"/commentlist"},"查看评论"))),this.props.children)}});ReactDOM.render(React.createElement(Router,{history:hashHistory},React.createElement(Route,{path:"/",component:App},React.createElement(Route,{path:"/commentupload",component:CommentUpload}),React.createElement(Route,{path:"/commentlist",component:CommentList}))),document.getElementById("container"));